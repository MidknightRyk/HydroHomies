<!DOCTYPE html>
<html lang="en">

<head>
	<title>Upload Images</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />

	<!-- Font Awesome CDN -->
	<script src="https://kit.fontawesome.com/010fb4b3e5.js"></script>
</head>

<body class="is-preload">

  <div id="main">

    <div class="form-container">
      <form id="addForm" method="post" action="/images/upload-images" enctype="multipart/form-data">
        <!-- Upload Photos -->
        <div class="container">
          <div class="array">
            <div class="preview-images-zone">
            </div>
            <!-- Upload Image Button -->
            <fieldset class="form-group">
              <button class="button" style=" margin-top:10px; text-decoration: none;" href="javascript:void(0)" onclick="$('#pro-image').click()">Upload Image</button>

              <!-- I know this looks ugly but i really dont know how to add this maximum 5 and make it pretty at the same time. -->
              <span style="font-size:10px; color: #8ba5b4;">(5)</span>
              <input accept="image/*" type="file" id="pro-image" name="pro-image" style="display: none;" class="form-control" multiple>
            </fieldset>
          </div>
        </div>

        <!-- Submit Button -->
        <section>
          <ul class="actions">
            <li><input type="submit" onclick="myFunction()" value="Submit Photos" class="button" /></li>
          </ul>
        </section>
      </form>
    </div>
  </div>

  <footer id="footer">
    <div class="inner">
    </div>
  </footer>

  <!-- Upload Images -->
  <!-- Adapted from : https://bootsnipp.com/snippets/2eNKz -->
  <script>
    $(document).ready(function() {
      document.getElementById('pro-image').addEventListener('change', readImage, false);
      $(document).on('click', '.image-cancel', function() {
        let no = $(this).data('no');
        $(".preview-image.preview-show-" + no).remove();
      });
    });
    var num = 1;

    function readImage() {
      if (window.File && window.FileList && window.FileReader) {
        var files = event.target.files; //FileList object
        var output = $(".preview-images-zone");
        for (let i = 0; i < files.length; i++) {
          var file = files[i];
          if (!file.type.match('image')) continue;
          var picReader = new FileReader();
          picReader.addEventListener('load', function(event) {
            var picFile = event.target;
            var html = '<div class="preview-image preview-show-' + num + '">' +
              '<div class="image-cancel" data-no="' + num + '">x</div>' +
              '<div class="image-zone"><img id="pro-img-' + num + '" src="' + picFile.result + '"></div>' +
              '</div>';
            output.append(html);
            num = num + 1;
          });
          picReader.readAsDataURL(file);
        }
      } else {
        console.log('Browser not support');
      }
    }
  </script>

</body>

</html>
